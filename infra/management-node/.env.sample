# .env-sample
# Sample environment variables for Terraform + Proxmox Rancher deployment
# Copy this file to `.env` and fill in actual values before running Terraform

# Proxmox API access
TF_VAR_proxmox_url=https://<proxmox-host>:8006/api2/json   # Proxmox API URL
TF_VAR_proxmox_token=<user@realm!token_id>                 # Proxmox API token ID (e.g., root@pam!terraform)
TF_VAR_proxmox_secret=<token_secret>                       # Proxmox API token secret
TF_VAR_proxmox_node=<default_node_name>                    # (Optional) Default Proxmox node name

# Rancher VM configuration
# This is a JSON-encoded HCL object with one or more VMs
# Add more VMs as needed using the same structure
TF_VAR_rancher_vms='{
  "rancher-01": {
    target_node     = "<node_name>",         # Proxmox node (e.g., "pve1")
    vmid            = <vm_id>,               # Unique VM ID (e.g., 900)
    ignition        = "<storage>:iso/<filename>.iso",  # ISO path for ignition
    ip              = "<ip_address>",        # Static IP (e.g., 10.1.1.41)
    network_model   = "<network_model"       # Most likely virtio
    network_bridge  = "<bridge>",            # Network bridge (e.g., vmbr0)
    sockets         = 1,                     # Number of CPU Sockets used.
    cores           = <number>,              # CPU cores (e.g., 2)
    memory          = <memory_mb>,           # RAM in MB (e.g., 8192)
    storage         = "<storage>",           # Main disk storage (e.g., local-lvm)
    size            = <disk_gb>,             # Disk size in GB (e.g., 64)
    ext_storage     = "<storage>",           # Extra disk storage (e.g., local-lvm)
    ext_size        = <disk_gb>,             # Extra disk size in GB (e.g., 256)
    template        = "<template_name>",     # Template to clone from (e.g., OpenSuSE-microOs)
    tags            = "<tag>",               # Tag (e.g., management)
    desc            = "<description>"        # Description (e.g., Rancher HA node)
  }
}'
