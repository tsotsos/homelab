apiVersion: v1
kind: ConfigMap
metadata:
  name: zigbee2mqtt-config
  namespace: zigbee2mqtt
data:
  configuration.yaml: |
    # Zigbee2MQTT Configuration
    # MQTT and serial credentials injected via environment variables
    # Network keys MUST be in config file (env vars don't work for arrays)
    version: 4
    homeassistant:
      enabled: true
    permit_join: false
    frontend:
      enabled: true
      port: 8080
    availability:
      enabled: true
      active:
        timeout: 20
      passive:
        timeout: 740
    advanced:
      transmit_power: 20
      channel: 25
      log_level: info
      cache_state: true
      last_seen: ISO_8601
      rtscts: false
      # Network keys - from sealed secret, will be injected by init container
      pan_id: PLACEHOLDER_PAN_ID
      network_key: PLACEHOLDER_NETWORK_KEY
      ext_pan_id: PLACEHOLDER_EXT_PAN_ID
    # Disable onboarding wizard
    onboarding: false
