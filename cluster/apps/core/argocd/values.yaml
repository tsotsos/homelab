configs:
  cm:
    url: https://argocd.kng.house
    kustomize.buildOptions: --enable-helm
    dex.config: |
        connectors:
        - config:
            issuer: $argocd-sso-secret:dex.authentik.issuer
            clientID: $argocd-sso-secret:dex.authentik.clidentID
            clientSecret: $argocd-sso-secret:dex.authentik.clientSecret
            insecureEnableGroups: true
            scopes:
              - openid
              - profile
              - email
          name: authentik
          type: oidc
          id: authentik
  params:
    controller.repo.server.plaintext: "true"
    dexserver.disable.tls: "true"
    server.dex.server.plaintext: "true"
    server.insecure: "true"
    server.repo.server.plaintext: "true"
rbac:
    policy.csv: |
        g, ArgoCD Admins, role:admin
        g, ArgoCD Viewers, role:readonly
server:
  ingress:
    hostname: argocd.kng.house
    enabled: true
    ingressClassName: nginx
    tls: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      external-dns.alpha.kubernetes.io/hostname: argocd.kng.house
      nginx.ingress.kubernetes.io/ssl-passthrough: "true"
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/backend-protocol: HTTPS