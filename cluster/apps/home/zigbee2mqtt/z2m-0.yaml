image:
  repository: koenkk/zigbee2mqtt
  tag: latest
env:
  TZ: Europe/Athens
  ZIGBEE2MQTT_CONFIG_MQTT_BASE_TOPIC: zigbee2mqtt
  ZIGBEE2MQTT_CONFIG_MQTT_SERVER: mqtt://mosquitto.home.svc.cluster.local
  ZIGBEE2MQTT_CONFIG_MQTT_INCLUDE_DEVICE_INFORMATION: true
  ZIGBEE2MQTT_CONFIG_SERIAL_PORT: tcp://10.0.5.10:6638
  ZIGBEE2MQTT_CONFIG_ADVANCED_LOG_LEVEL: debug
  ZIGBEE2MQTT_CONFIG_ADVANCED_LOG_OUTPUT: [console,file]
  ZIGBEE2MQTT_CONFIG_ADVANCED_PAN_ID: GENERATE
  ZIGBEE2MQTT_CONFIG_ADVANCED_EXT_PAN_ID: "0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08"
  ZIGBEE2MQTT_CONFIG_ADVANCED_NETWORK_KEY: GENERATE
  ZIGBEE2MQTT_CONFIG_ADVANCED_HOMEASSISTANT_DISCOVERY_TOPIC: homeassistant
  ZIGBEE2MQTT_CONFIG_ADVANCED_HOMEASSISTANT_STATUS_TOPIC: homeassistant/status
  ZIGBEE2MQTT_CONFIG_EXPERIMENTAL_NEW_API: true
  ZIGBEE2MQTT_CONFIG_HOMEASSISTANT: true
  ZIGBEE2MQTT_CONFIG_PERMIT_JOIN: true

persistence:
  config:
    enabled: true
    mountPath: /data
    existingClaim: z2m-0-data

ingress:
  main:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      certmanager.k8s.io/acme-challenge-type: dns01
      nginx.org/websocket-services: zigbee
      nginx.ingress.kubernetes.io/ssl-passthrough: "true"
    hosts:
      - host: z2m-0.kng.house
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: z2m-0-secret
        hosts:
          - z2m-0.kng.house