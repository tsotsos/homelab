apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: kube-system

commonAnnotations:
  argocd.argoproj.io/sync-wave: "-10"

resources:
  - rbac.yaml
  - ingress-secrets-rbac.yaml

helmCharts:
  - name: cilium
    repo: https://helm.cilium.io/
    version: 1.18.4
    releaseName: cilium
    namespace: kube-system
    valuesFile: values.yaml

patches:
  - path: envoy-patch.yaml
    target:
      kind: DaemonSet
      name: cilium-envoy
