# Persistence settings
persistence:
  defaultClass: true
  defaultFsType: ext4
  defaultClassReplicaCount: 2
  defaultDataLocality: disabled

# Disable pre-upgrade checker for GitOps (ArgoCD)
preUpgradeChecker:
  jobEnabled: false
  upgradeVersionCheck: false

# Default settings
defaultSettings:
  defaultReplicaCount: 2
  #backupTarget: nfs://nas.kng.house:/mnt/backups/longhorn
  
  # Optimize for your Cilium setup
  guaranteedInstanceManagerCPU: 12
  
  # HA across physical nodes (zones: s01, s02, s03)
  # Ensures replicas are distributed across different physical Proxmox hosts
  replicaSoftAntiAffinity: true
  replicaZoneSoftAntiAffinity: true
  replicaDiskSoftAntiAffinity: true
  
  # Storage optimization
  storageMinimalAvailablePercentage: 10
  
# Node selector for storage workloads
nodeSelector:
  node.kng/workload-storage: "true"

# Ingress configuration for Cilium Ingress Controller
# Disabled: Using Authentik proxy ingress (see ingress-auth.yaml)
ingress:
  enabled: false
  ingressClassName: cilium
  host: longhorn.kng.house
  path: /
  pathType: Prefix
  tls: true
  tlsSecret: longhorn-tls
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-dns

# Service configuration
service:
  ui:
    type: ClusterIP

